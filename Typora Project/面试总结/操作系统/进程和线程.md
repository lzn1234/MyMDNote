#### 进程和线程的区别

进程是系统资源分配的最小单位，线程是系统中任务调度的最小单位。

**进程就是程序的一次执行过程，它包含着内存、网络、文件等资源，**

**线程就一个程序内部的各个任务，是进程的一部分，各个线程可以共享进程所包含的资源。**

一个线程只能属于一个进程，一个进程可以有多个线程。



#### 线程同步的几种方式

> 线程同步是指多线程通过特定的设置来控制线程之间的执行顺序，也可以说是在线程之间通过同步建立起执行的顺序，如果没有同步，那么线程就是自己执行自己的

- **互斥量**

  使用互斥对象机制，只有拥有互斥对象的线程才有访问公共资源的权限。因为互斥对象只有一个，所有能保证公共资源不会被多个线程同时访问。线程在使用公共资源前要申请互斥对象的使用权，并在执行完之后需要释放掉互斥对象

- **信号量**

  它允许同一时刻多个线程访问统一个资源，但是需要控制同一时刻访问资源的最大线程数量。

- **事件**

  通过通知的方式来保持多线程同步，还可以方便的实现多线程执行的优先级

  

#### 进程通信的几种方式

> 进程通信就是在不同进程之间传播或交换信息

- **管道**

  管道（pipe）是将一个进程的输出交给另一个程序处理。当一个进程向管道中输入数据是后，则**该进程会阻塞**直到别的进程从管道中读取数。

- **消息队列**

  消息队列提供了一种从一个进程向另一个进程发送一个数据块的方法。每个数据块都被认为含有一个类型，接收进程可以独立地接收含有不同类型的数据结构。使用消息队列可以<u>避免管道的同步和阻塞问题</u>，但消息队列和管道一样，发送的数据块有最大长度的制约。

  频繁的使用消息队列会使得接收进程频繁的从消息队列中读取需要的数据到内存，相当于<u>间接的从发送进程拷贝到接收进程</u>，比较花费时间。

- **共享内存**

  系统加载进程的时候，分配给进程的内存并不是实际物理内存，而是虚拟内存。共享内存就是让两个进程各自拿出一块虚拟内存，并将其映射到同一块物理内存中，这样两个进程都有着独立的虚拟内存，但有一部分却是映射到同一块物理内存，这就完成了共享内存机制。

  共享内存优化了管道和消息产生的拷贝问题，但同样引发了线程安全问题，比如多个进程同时操作这一块内存上的数据。

- **信号量**

  信号量的本质是一个计数器，实现进程之间的互斥与同步。例如信号量的初始值是 1，然后 **a 进程**来访问**内存1**的时候，我们就把信号量的值设为 0，然后**进程b** 也要来访问**内存1**的时候，看到信号量的值为 0 就知道已经有进程在访问**内存1**了，这个时候**进程 b** 就会访问不了**内存1**。所以说，信号量也是进程之间的一种通信方式。

- **Socket**

  使用socket来进行两个进程的通信

  

#### 进程的几种状态

- 就绪状态：当进程已经分配除了CPU之外的所有资源，只需要获得处理机就可以立即执行，这时的进程状态就称为**就绪状态**。
- 执行状态：进程获得处理机，该程序在在处理机上执行，这时的进程状态就称为**执行状态**。
- 阻塞状态：正在执行的进程，由于等待某个事件发生而无法执行时（即CPU之外的其他资源不足），就会放弃处理机进入阻塞，这时的进程状态处于**阻塞状态**。



#### 进程的状态转换

-  就绪→执行
  处于就绪状态的进程，当进程调度程序为之分配了处理机后，该进程便由就绪状态转变成执行状态。

-  执行→就绪

  处于执行状态的进程在其执行过程中，因分配给它的一个时间片已用完而不得不让出处理机，于是进程从执行状态转变成就绪状态。

- 执行→阻塞
  正在执行的进程因等待某种事件发生而无法继续执行时，便从执行状态变成阻塞状态。

- 阻塞→就绪
  处于阻塞状态的进程，若其等待的事件已经发生，于是进程由阻塞状态转变为就绪状态。
